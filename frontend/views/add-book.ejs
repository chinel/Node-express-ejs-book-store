<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <meta name="description" content="" />
  <meta name="author" content="" />
  <title>
    <%= pageTitle %>
  </title>
  <link rel="icon" type="image/x-icon" href="../assets/favicon.ico" />
  <!-- Font Awesome icons (free version)-->
  <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
  <!-- Google fonts-->
  <link href="https://fonts.googleapis.com/css?family=Varela+Round" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet" />
  <!-- Core theme CSS (includes Bootstrap)-->
  <link href="../css/styles.css" rel="stylesheet" />
</head>

<body id="page-top">
  <!-- Navigation-->
  <%- include('includes/nav') %>
  <!-- Masthead-->
  <header class="masthead h-50 d-flex align-items-center">
    <div class="container px-4 px-lg-5 d-flex h-100 align-items-center justify-content-center">
      <div class="d-flex justify-content-center">
        <div class="text-center">
          <% if (message !== null  ) { %>
          <div <% if( typeof(errors)==="undefined" ){ %> class="" <% } else { %> class="alert alert-danger me-4" <%
                    } %>>
            <%= message %>
          </div>
          <% } %>
          <h1 class="mx-auto my-0 text-uppercase">Add Book</h1>
        </div>
      </div>
    </div>
  </header>

  <!-- Projects-->
  <section class="projects-section bg-light-custom-1" id="projects">
    <div class="container px-4 px-lg-5">

      <div class="row mb-lg-5 d-flex justify-content-end">
        <div class="col-auto"> <a href="/books" class="btn btn-primary ">
            Back to Books
          </a></div>
      </div>

    

    </div>
  <div class="form-section"> 
    <div class="container px-4 px-lg-5">
        <div class="row gx-4 gy-4 ">
            <div class="col-md-10 col-lg-6 mx-auto text-center">
                <i class="fa fa-book fa-2x mb-2"></i>
                <h2 id="formHeader" class="mb-5">Add Book!</h2>
                <% if (message !== null ) { %>
                <div id="message" <% if( typeof(errors) ==="undefined"){ %> class="alert alert-success me-4" <% } else {  %> class="alert alert-danger me-4" <% } %>>
                  <%= message %></div>
                <% } %>
            <form class="form-signup"  action="/books/addbook" method="post">
              <div class="row input-group-newsletter gap-4">
                <div class="row">
                  <input required class="form-control" id="title" type="text" placeholder="Enter Book title..." aria-label="Enter Book tile..." name="title" <% if(typeof(body) !=="undefined" )
                      {%> value="<%= body.title%>" <%}%> /> 
                </div>
                <div class="row">
                  <input required class="form-control" id="ISBN" type="text" placeholder="Enter ISBN..." aria-label="Enter ISBN..." name="ISBN" <% if(typeof(body) !=="undefined" )
                      {%> value="<%= body.ISBN%>" <%}%> /> 
                </div>
                <div class="row">
                  <input required class="form-control" id="numberOfPages" type="number" placeholder="Number of pages..." aria-label="Number of pages..." name="numberOfPages" <% if(typeof(body) !=="undefined" )
                      {%> value="<%= body.numberOfPages%>" <%}%> /> 
                </div>
                <div class="row">
                  <input required class="form-control" id="price" type="number" min="0" placeholder="Price..." aria-label="Price..." name="price" <% if(typeof(body) !=="undefined" )
                      {%> value="<%= body.price%>" <%}%> /> 
                </div>
                <div class="row">
                  <input required class="form-control" id="yearPublished" type="number" min="0" placeholder="Year released..." aria-label="Year released..." name="yearPublished" <% if(typeof(body) !=="undefined" )
                      {%> value="<%= body.yearPublished%>" <%}%> /> 
                </div>
                <div class="row">
                    <select class="form-select" id="author" name="author" required>
                        <option value="">-- Select an Author --</option>
                        <% if(typeof(data) !== undefined && data.authors.length > 0) { %>
                            <% data.authors.map((item, index) => {%>
                        <option value="<%= item._id%>"><%- item.name %></option>

                           <% }) %>
                        <% }%>

                        
                        </select>
               
                </div>
             
                <div class="row">
                  <button class="btn btn-primary" id="submitButton" type="submit">
                    Submit
                  </button>
                </div>
              </div>
            </form>
    </div>

          </div>
    </div>
  </div>
  </section>

  <!-- Footer-->
  <%- include('includes/footer') %>
  <!-- Bootstrap core JS-->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Core theme JS-->
  <script src="../js/scripts.js"></script>

  <script src="https://cdn.startbootstrap.com/sb-forms-latest.js"></script>
</body>

</html>